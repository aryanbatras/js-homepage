export const virtualDOM = {
  title: "Virtual DOM Implementation",
  description: "Build a simple Virtual DOM system with diffing and patching algorithms",
  code_examples: [
    {
      example: "Example 1:",
      code: "function createElement(tag, props, ...children) {\n  return { tag, props, children };\n}",
    },
  ],
  hints: [
    {
      hint: "Hint: Use tree traversal for diffing algorithm",
    },
    {
      hint: "Consider key props for efficient list updates",
    },
  ],
  solution: [
    {
      approach: "Approach 1: Basic Virtual DOM",
      code: "function h(tag, props, ...children) {\n  return { tag, props: props || {}, children };\n}\n\nfunction render(vnode) {\n  if (typeof vnode === 'string') {\n    return document.createTextNode(vnode);\n  }\n  \n  const element = document.createElement(vnode.tag);\n  \n  Object.keys(vnode.props).forEach(key => {\n    element.setAttribute(key, vnode.props[key]);\n  });\n  \n  vnode.children.forEach(child => {\n    element.appendChild(render(child));\n  });\n  \n  return element;\n}",
    },
  ],
  files: [
    {
      name: "index.html",
      code: "<!DOCTYPE html>\n<html lang='en'>\n<head>\n  <meta charset='UTF-8'>\n  <meta name='viewport' content='width=device-width, initial-scale=1.0'>\n  <title>Virtual DOM Implementation</title>\n  <link rel='stylesheet' href='styles.css'>\n</head>\n<body>\n  <div class='container'>\n    <h1>Virtual DOM Implementation</h1>\n    \n    <div class='vdom-section'>\n      <h3>Virtual DOM Demo</h3>\n      <div class='demo-container'>\n        <div class='vdom-controls'>\n          <button id='createElement'>Create Element</button>\n          <button id='updateElement'>Update Element</button>\n          <button id='addElement'>Add Child</button>\n          <button id='removeElement'>Remove Element</button>\n          <button id='resetDOM'>Reset</button>\n        </div>\n        <div class='vdom-display'>\n          <div class='vdom-tree'>\n            <h4>Virtual DOM Tree:</h4>\n            <pre id='vdomTree'>{}</pre>\n          </div>\n          <div class='real-dom'>\n            <h4>Real DOM:</h4>\n            <div id='realDOM'></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div class='vdom-section'>\n      <h3>Diffing Algorithm</h3>\n      <div class='demo-container'>\n        <div class='diff-controls'>\n          <button id='generateOldTree'>Generate Old Tree</button>\n          <button id='generateNewTree'>Generate New Tree</button>\n          <button id='compareTrees'>Compare & Patch</button>\n          <button id='autoDiff'>Auto Diff Demo</button>\n        </div>\n        <div class='diff-display'>\n          <div class='tree-comparison'>\n            <div class='old-tree'>\n              <h4>Old Tree:</h4>\n              <pre id='oldTree'></pre>\n            </div>\n            <div class='new-tree'>\n              <h4>New Tree:</h4>\n              <pre id='newTree'></pre>\n            </div>\n          </div>\n          <div class='patches'>\n            <h4>Patches:</h4>\n            <ul id='patchList'></ul>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div class='vdom-section'>\n      <h3>Performance Comparison</h3>\n      <div class='demo-container'>\n        <div class='perf-controls'>\n          <label>Items:</label>\n          <input type='number' id='itemCount' value='1000' min='100' max='10000' step='100'>\n          <button id='benchmarkVDOM'>Virtual DOM</button>\n          <button id='benchmarkReal'>Real DOM</button>\n          <button id='clearBenchmark'>Clear</button>\n        </div>\n        <div class='perf-results'>\n          <div class='perf-metric'>\n            <h4>Virtual DOM Time:</h4>\n            <span id='vdomTime'>0ms</span>\n          </div>\n          <div class='perf-metric'>\n            <h4>Real DOM Time:</h4>\n            <span id='realTime'>0ms</span>\n          </div>\n          <div class='perf-metric'>\n            <h4>Improvement:</h4>\n            <span id='improvement'>0%</span>\n          </div>\n        </div>\n        <div id='benchmarkContainer'></div>\n      </div>\n    </div>\n    \n    <div class='vdom-section'>\n      <h3>Interactive Todo App</h3>\n      <div class='demo-container'>\n        <div class='todo-controls'>\n          <input type='text' id='todoInput' placeholder='Add new todo...'>\n          <button id='addTodo'>Add Todo</button>\n          <button id='clearCompleted'>Clear Completed</button>\n        </div>\n        <div id='todoApp'></div>\n        <div class='todo-stats'>\n          <p>Total: <span id='totalTodos'>0</span></p>\n          <p>Completed: <span id='completedTodos'>0</span></p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <script src='script.js'></script>\n</body>\n</html>"
    },
    {
      name: "styles.css",
      code: "* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: Arial, sans-serif;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n  padding: 2rem;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  background: white;\n  border-radius: 16px;\n  padding: 2rem;\n  box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n}\n\nh1 {\n  color: #333;\n  margin-bottom: 2rem;\n  text-align: center;\n  font-size: 2.5rem;\n}\n\n.vdom-section {\n  margin: 3rem 0;\n  padding: 2rem;\n  border: 2px solid #f0f0f0;\n  border-radius: 12px;\n  background: #fafafa;\n}\n\n.vdom-section h3 {\n  color: #666;\n  margin-bottom: 1.5rem;\n  font-size: 1.2rem;\n  text-align: center;\n}\n\n.demo-container {\n  background: white;\n  border-radius: 8px;\n  padding: 1.5rem;\n  border: 2px solid #dee2e6;\n}\n\n.vdom-controls,\n.diff-controls,\n.perf-controls,\n.todo-controls {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.vdom-controls input,\n.diff-controls input,\n.perf-controls input,\n.todo-controls input {\n  padding: 0.6rem;\n  border: 2px solid #dee2e6;\n  border-radius: 4px;\n  font-size: 1rem;\n}\n\nbutton {\n  padding: 0.6rem 1.2rem;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: bold;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\nbutton:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n\nbutton:active {\n  transform: translateY(0);\n}\n\n.vdom-display {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n}\n\n.vdom-tree,\n.real-dom {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid #e9ecef;\n}\n\n.vdom-tree h4,\n.real-dom h4 {\n  color: #666;\n  margin-bottom: 1rem;\n  font-size: 1rem;\n}\n\n#vdomTree,\n#oldTree,\n#newTree {\n  background: #2d3748;\n  color: #e2e8f0;\n  padding: 1rem;\n  border-radius: 4px;\n  font-family: 'Courier New', monospace;\n  font-size: 0.9rem;\n  overflow-x: auto;\n  white-space: pre-wrap;\n}\n\n#realDOM {\n  min-height: 100px;\n  padding: 1rem;\n  background: white;\n  border: 2px solid #dee2e6;\n  border-radius: 4px;\n}\n\n.diff-display {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n  margin-bottom: 2rem;\n}\n\n.tree-comparison {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n}\n\n.old-tree,\n.new-tree {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid #e9ecef;\n}\n\n.old-tree h4,\n.new-tree h4 {\n  color: #666;\n  margin-bottom: 1rem;\n  font-size: 1rem;\n}\n\n.patches {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid #e9ecef;\n}\n\n.patches h4 {\n  color: #666;\n  margin-bottom: 1rem;\n  font-size: 1rem;\n}\n\n#patchList {\n  list-style: none;\n  font-family: 'Courier New', monospace;\n  font-size: 0.9rem;\n}\n\n#patchList li {\n  padding: 0.5rem;\n  margin-bottom: 0.5rem;\n  background: white;\n  border-radius: 4px;\n  border-left: 3px solid #667eea;\n}\n\n.perf-results {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  margin-bottom: 2rem;\n}\n\n.perf-metric {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1rem;\n  text-align: center;\n  border: 1px solid #e9ecef;\n}\n\n.perf-metric h4 {\n  color: #666;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n}\n\n.perf-metric span {\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #667eea;\n}\n\n#benchmarkContainer {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid #e9ecef;\n  min-height: 200px;\n  overflow: auto;\n}\n\n.todo-item {\n  display: flex;\n  align-items: center;\n  padding: 0.8rem;\n  margin-bottom: 0.5rem;\n  background: white;\n  border: 1px solid #dee2e6;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.todo-item:hover {\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n\n.todo-item.completed {\n  opacity: 0.6;\n  text-decoration: line-through;\n}\n\n.todo-item input[type='checkbox'] {\n  margin-right: 1rem;\n}\n\n.todo-item span {\n  flex: 1;\n}\n\n.todo-item button {\n  padding: 0.3rem 0.6rem;\n  font-size: 0.8rem;\n  background: #ff6b6b;\n  margin-left: 0.5rem;\n}\n\n.todo-stats {\n  display: flex;\n  justify-content: center;\n  gap: 2rem;\n  margin-top: 1rem;\n  color: #666;\n}\n\n.todo-stats span {\n  font-weight: bold;\n  color: #667eea;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .vdom-display {\n    grid-template-columns: 1fr;\n  }\n  \n  .diff-display {\n    grid-template-columns: 1fr;\n  }\n  \n  .tree-comparison {\n    grid-template-columns: 1fr;\n  }\n  \n  .perf-results {\n    grid-template-columns: 1fr;\n  }\n  \n  .vdom-controls,\n  .diff-controls,\n  .perf-controls,\n  .todo-controls {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .vdom-controls input,\n  .diff-controls input,\n  .perf-controls input,\n  .todo-controls input {\n    width: 100%;\n  }\n  \n  .container {\n    padding: 1rem;\n  }\n  \n  .vdom-section {\n    padding: 1rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .container {\n    padding: 0.5rem;\n  }\n  \n  .vdom-section {\n    padding: 0.5rem;\n  }\n}"
    },
    {
      name: "script.js",
      code: "// Virtual DOM Implementation\n\n// Virtual DOM element creator\nfunction h(tag, props = {}, ...children) {\n  return {\n    tag,\n    props,\n    children: children.flat()\n  };\n}\n\n// Render Virtual DOM to Real DOM\nfunction render(vnode) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return document.createTextNode(vnode);\n  }\n  \n  if (!vnode || !vnode.tag) {\n    return document.createTextNode('');\n  }\n  \n  const element = document.createElement(vnode.tag);\n  \n  // Set attributes\n  Object.keys(vnode.props).forEach(key => {\n    if (key === 'className') {\n      element.className = vnode.props[key];\n    } else if (key === 'style' && typeof vnode.props[key] === 'object') {\n      Object.assign(element.style, vnode.props[key]);\n    } else if (key.startsWith('on') && typeof vnode.props[key] === 'function') {\n      const eventType = key.slice(2).toLowerCase();\n      element.addEventListener(eventType, vnode.props[key]);\n    } else {\n      element.setAttribute(key, vnode.props[key]);\n    }\n  });\n  \n  // Append children\n  vnode.children.forEach(child => {\n    element.appendChild(render(child));\n  });\n  \n  return element;\n}\n\n// Diffing algorithm\nfunction diff(oldVNode, newVNode) {\n  const patches = [];\n  \n  function walk(oldNode, newNode, index) {\n    if (!oldNode && newNode) {\n      patches.push({ type: 'CREATE', vnode: newNode, index });\n    } else if (oldNode && !newNode) {\n      patches.push({ type: 'REMOVE', index });\n    } else if (oldNode && newNode) {\n      if (typeof oldNode !== typeof newNode) {\n        patches.push({ type: 'REPLACE', vnode: newNode, index });\n      } else if (typeof oldNode === 'string') {\n        if (oldNode !== newNode) {\n          patches.push({ type: 'REPLACE', vnode: newNode, index });\n        }\n      } else if (oldNode.tag !== newNode.tag) {\n        patches.push({ type: 'REPLACE', vnode: newNode, index });\n      } else {\n        // Compare props\n        const oldProps = oldNode.props || {};\n        const newProps = newNode.props || {};\n        \n        // Check for changed props\n        Object.keys(newProps).forEach(key => {\n          if (oldProps[key] !== newProps[key]) {\n            patches.push({\n              type: 'PROP',\n              key,\n              value: newProps[key],\n              index\n            });\n          }\n        });\n        \n        // Check for removed props\n        Object.keys(oldProps).forEach(key => {\n          if (!(key in newProps)) {\n            patches.push({\n              type: 'PROP',\n              key,\n              value: null,\n              index\n            });\n          }\n        });\n        \n        // Compare children\n        const oldChildren = oldNode.children || [];\n        const newChildren = newNode.children || [];\n        const maxLength = Math.max(oldChildren.length, newChildren.length);\n        \n        for (let i = 0; i < maxLength; i++) {\n          walk(oldChildren[i], newChildren[i], `${index}.${i}`);\n        }\n      }\n    }\n  }\n  \n  walk(oldVNode, newVNode, '0');\n  return patches;\n}\n\n// Apply patches to DOM\nfunction patch(element, patches) {\n  patches.forEach(patch => {\n    const index = patch.index.split('.').map(Number);\n    let current = element;\n    \n    for (let i = 0; i < index.length - 1; i++) {\n      current = current.childNodes[index[i]];\n    }\n    \n    const targetIndex = index[index.length - 1];\n    \n    switch (patch.type) {\n      case 'CREATE':\n        const newElement = render(patch.vnode);\n        if (targetIndex === 0 && index.length === 1) {\n          current.appendChild(newElement);\n        } else {\n          current.insertBefore(newElement, current.childNodes[targetIndex]);\n        }\n        break;\n        \n      case 'REMOVE':\n        if (current.childNodes[targetIndex]) {\n          current.removeChild(current.childNodes[targetIndex]);\n        }\n        break;\n        \n      case 'REPLACE':\n        const replacement = render(patch.vnode);\n        if (current.childNodes[targetIndex]) {\n          current.replaceChild(replacement, current.childNodes[targetIndex]);\n        } else {\n          current.appendChild(replacement);\n        }\n        break;\n        \n      case 'PROP':\n        const targetElement = current.childNodes[targetIndex] || current;\n        if (patch.key === 'className') {\n          targetElement.className = patch.value || '';\n        } else if (patch.key === 'style' && typeof patch.value === 'object') {\n          Object.assign(targetElement.style, patch.value);\n        } else if (patch.key.startsWith('on')) {\n          const eventType = patch.key.slice(2).toLowerCase();\n          if (patch.value) {\n            targetElement.addEventListener(eventType, patch.value);\n          }\n        } else if (patch.value === null) {\n          targetElement.removeAttribute(patch.key);\n        } else {\n          targetElement.setAttribute(patch.key, patch.value);\n        }\n        break;\n    }\n  });\n}\n\n// Demo state\nlet currentVNode = null;\nlet currentElement = null;\nlet oldTree = null;\nlet newTree = null;\n\n// Virtual DOM Demo\nfunction updateVDOMDisplay() {\n  const vdomTreeEl = document.getElementById('vdomTree');\n  const realDOMEl = document.getElementById('realDOM');\n  \n  if (currentVNode) {\n    vdomTreeEl.textContent = JSON.stringify(currentVNode, null, 2);\n  }\n  \n  if (currentElement) {\n    realDOMEl.innerHTML = '';\n    realDOMEl.appendChild(currentElement);\n  }\n}\n\ndocument.getElementById('createElement').addEventListener('click', () => {\n  currentVNode = h('div', { className: 'container' },\n    h('h1', {}, 'Hello Virtual DOM!'),\n    h('p', {}, 'This is rendered using Virtual DOM')\n  );\n  currentElement = render(currentVNode);\n  updateVDOMDisplay();\n});\n\ndocument.getElementById('updateElement').addEventListener('click', () => {\n  if (currentVNode) {\n    const newVNode = h('div', { className: 'container updated' },\n      h('h1', {}, 'Updated Virtual DOM!'),\n      h('p', {}, 'This has been updated'),\n      h('span', {}, 'New element added')\n    );\n    \n    const patches = diff(currentVNode, newVNode);\n    if (currentElement) {\n      patch(currentElement, patches);\n    }\n    \n    currentVNode = newVNode;\n    updateVDOMDisplay();\n  }\n});\n\ndocument.getElementById('addElement').addEventListener('click', () => {\n  if (currentVNode && currentVNode.children) {\n    const newChildren = [...currentVNode.children, h('span', {}, 'Dynamic child ' + Date.now())];\n    const newVNode = { ...currentVNode, children: newChildren };\n    \n    const patches = diff(currentVNode, newVNode);\n    if (currentElement) {\n      patch(currentElement, patches);\n    }\n    \n    currentVNode = newVNode;\n    updateVDOMDisplay();\n  }\n});\n\ndocument.getElementById('removeElement').addEventListener('click', () => {\n  if (currentVNode && currentVNode.children && currentVNode.children.length > 0) {\n    const newChildren = currentVNode.children.slice(0, -1);\n    const newVNode = { ...currentVNode, children: newChildren };\n    \n    const patches = diff(currentVNode, newVNode);\n    if (currentElement) {\n      patch(currentElement, patches);\n    }\n    \n    currentVNode = newVNode;\n    updateVDOMDisplay();\n  }\n});\n\ndocument.getElementById('resetDOM').addEventListener('click', () => {\n  currentVNode = null;\n  currentElement = null;\n  updateVDOMDisplay();\n});\n\n// Diffing Demo\nfunction generateRandomTree() {\n  const tags = ['div', 'span', 'p', 'h1', 'h2', 'ul', 'li'];\n  const colors = ['red', 'blue', 'green', 'purple'];\n  const tag = tags[Math.floor(Math.random() * tags.length)];\n  const hasChildren = Math.random() > 0.5;\n  \n  const props = {\n    className: `element ${colors[Math.floor(Math.random() * colors.length)]}`,\n    style: { color: colors[Math.floor(Math.random() * colors.length)] }\n  };\n  \n  if (hasChildren) {\n    const childCount = Math.floor(Math.random() * 3) + 1;\n    const children = [];\n    \n    for (let i = 0; i < childCount; i++) {\n      if (Math.random() > 0.3) {\n        children.push(generateRandomTree());\n      } else {\n        children.push(`Text content ${i + 1}`);\n      }\n    }\n    \n    return h(tag, props, ...children);\n  }\n  \n  return h(tag, props, `Text content`);\n}\n\ndocument.getElementById('generateOldTree').addEventListener('click', () => {\n  oldTree = generateRandomTree();\n  document.getElementById('oldTree').textContent = JSON.stringify(oldTree, null, 2);\n});\n\ndocument.getElementById('generateNewTree').addEventListener('click', () => {\n  newTree = generateRandomTree();\n  document.getElementById('newTree').textContent = JSON.stringify(newTree, null, 2);\n});\n\ndocument.getElementById('compareTrees').addEventListener('click', () => {\n  if (oldTree && newTree) {\n    const patches = diff(oldTree, newTree);\n    const patchList = document.getElementById('patchList');\n    \n    patchList.innerHTML = patches.map(patch => {\n      return `<li>${patch.type}: ${JSON.stringify(patch)}</li>`;\n    }).join('');\n  }\n});\n\ndocument.getElementById('autoDiff').addEventListener('click', () => {\n  oldTree = h('div', { className: 'container' },\n    h('h1', {}, 'Title'),\n    h('p', {}, 'Paragraph 1'),\n    h('p', {}, 'Paragraph 2')\n  );\n  \n  newTree = h('div', { className: 'container updated' },\n    h('h1', {}, 'Updated Title'),\n    h('p', {}, 'Paragraph 1'),\n    h('span', {}, 'New paragraph'),\n    h('p', {}, 'Paragraph 2')\n  );\n  \n  document.getElementById('oldTree').textContent = JSON.stringify(oldTree, null, 2);\n  document.getElementById('newTree').textContent = JSON.stringify(newTree, null, 2);\n  \n  const patches = diff(oldTree, newTree);\n  const patchList = document.getElementById('patchList');\n  \n  patchList.innerHTML = patches.map(patch => {\n    return `<li>${patch.type}: ${JSON.stringify(patch)}</li>`;\n  }).join('');\n});\n\n// Performance Benchmark\nfunction benchmarkVDOM(itemCount) {\n  const items = Array.from({ length: itemCount }, (_, i) => \n    h('li', {}, `Item ${i + 1}`)\n  );\n  \n  const start = performance.now();\n  const vdom = h('ul', { className: 'list' }, ...items);\n  const element = render(vdom);\n  const end = performance.now();\n  \n  return { vdom, element, time: end - start };\n}\n\nfunction benchmarkRealDOM(itemCount) {\n  const container = document.createElement('div');\n  const ul = document.createElement('ul');\n  ul.className = 'list';\n  \n  const start = performance.now();\n  \n  for (let i = 0; i < itemCount; i++) {\n    const li = document.createElement('li');\n    li.textContent = `Item ${i + 1}`;\n    ul.appendChild(li);\n  }\n  \n  container.appendChild(ul);\n  const end = performance.now();\n  \n  return { element: container, time: end - start };\n}\n\ndocument.getElementById('benchmarkVDOM').addEventListener('click', () => {\n  const itemCount = parseInt(document.getElementById('itemCount').value);\n  const result = benchmarkVDOM(itemCount);\n  \n  const container = document.getElementById('benchmarkContainer');\n  container.innerHTML = '';\n  container.appendChild(result.element);\n  \n  document.getElementById('vdomTime').textContent = result.time.toFixed(2) + 'ms';\n});\n\ndocument.getElementById('benchmarkReal').addEventListener('click', () => {\n  const itemCount = parseInt(document.getElementById('itemCount').value);\n  const result = benchmarkRealDOM(itemCount);\n  \n  const container = document.getElementById('benchmarkContainer');\n  container.innerHTML = '';\n  container.appendChild(result.element);\n  \n  document.getElementById('realTime').textContent = result.time.toFixed(2) + 'ms';\n  \n  // Calculate improvement\n  const vdomTime = parseFloat(document.getElementById('vdomTime').textContent);\n  if (vdomTime > 0) {\n    const improvement = ((vdomTime - result.time) / vdomTime * 100).toFixed(1);\n    document.getElementById('improvement').textContent = improvement + '%';\n  }\n});\n\ndocument.getElementById('clearBenchmark').addEventListener('click', () => {\n  document.getElementById('benchmarkContainer').innerHTML = '';\n  document.getElementById('vdomTime').textContent = '0ms';\n  document.getElementById('realTime').textContent = '0ms';\n  document.getElementById('improvement').textContent = '0%';\n});\n\n// Todo App with Virtual DOM\nlet todoData = [\n  { id: 1, text: 'Learn Virtual DOM', completed: false },\n  { id: 2, text: 'Build diffing algorithm', completed: true },\n  { id: 3, text: 'Create patch system', completed: false }\n];\n\nlet todoVNode = null;\nlet todoElement = null;\n\nfunction createTodoVNode() {\n  return h('div', { className: 'todo-app' },\n    h('ul', { className: 'todo-list' },\n      ...todoData.map(todo =>\n        h('li', {\n          className: `todo-item ${todo.completed ? 'completed' : ''}`,\n          key: todo.id\n        },\n          h('input', {\n            type: 'checkbox',\n            checked: todo.completed,\n            onChange: (e) => toggleTodo(todo.id, e.target.checked)\n          }),\n          h('span', {}, todo.text),\n          h('button', {\n            onClick: () => deleteTodo(todo.id)\n          }, 'Delete')\n        )\n      )\n    )\n  );\n}\n\nfunction updateTodoApp() {\n  const newVNode = createTodoVNode();\n  \n  if (!todoVNode) {\n    todoVNode = newVNode;\n    todoElement = render(todoVNode);\n    document.getElementById('todoApp').appendChild(todoElement);\n  } else {\n    const patches = diff(todoVNode, newVNode);\n    patch(todoElement, patches);\n    todoVNode = newVNode;\n  }\n  \n  updateTodoStats();\n}\n\nfunction toggleTodo(id, completed) {\n  todoData = todoData.map(todo =>\n    todo.id === id ? { ...todo, completed } : todo\n  );\n  updateTodoApp();\n}\n\nfunction deleteTodo(id) {\n  todoData = todoData.filter(todo => todo.id !== id);\n  updateTodoApp();\n}\n\nfunction addTodo(text) {\n  const newTodo = {\n    id: Date.now(),\n    text,\n    completed: false\n  };\n  todoData = [...todoData, newTodo];\n  updateTodoApp();\n}\n\nfunction updateTodoStats() {\n  const total = todoData.length;\n  const completed = todoData.filter(todo => todo.completed).length;\n  \n  document.getElementById('totalTodos').textContent = total;\n  document.getElementById('completedTodos').textContent = completed;\n}\n\ndocument.getElementById('addTodo').addEventListener('click', () => {\n  const input = document.getElementById('todoInput');\n  if (input.value.trim()) {\n    addTodo(input.value.trim());\n    input.value = '';\n  }\n});\n\ndocument.getElementById('todoInput').addEventListener('keypress', (e) => {\n  if (e.key === 'Enter') {\n    const input = e.target;\n    if (input.value.trim()) {\n      addTodo(input.value.trim());\n      input.value = '';\n    }\n  }\n});\n\ndocument.getElementById('clearCompleted').addEventListener('click', () => {\n  todoData = todoData.filter(todo => !todo.completed);\n  updateTodoApp();\n});\n\n// Initialize todo app\nupdateTodoApp();"
    }
  ],
  tests: [
    {
      test: "Test 1: Virtual DOM creation",
      code: "const vnode = h('div', { className: 'test' }, 'Hello');\nconsole.log('Virtual node created:', vnode.tag, vnode.props.className);"
    }
  ],
};
