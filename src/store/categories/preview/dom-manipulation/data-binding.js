export const dataBinding = {
  title: "Data Binding System",
  description: "Create a reactive data binding system that synchronizes data with DOM elements",
  code_examples: [
    {
      example: "Example 1:",
      code: "class DataBinder {\n  constructor(data, element) {\n    this.data = data;\n    this.element = element;\n    this.bind();\n  }\n  \n  bind() {\n    this.element.textContent = this.data.value;\n  }\n}",
    },
  ],
  hints: [
    {
      hint: "Hint: Use getters/setters for reactive properties",
    },
    {
      hint: "Consider event listeners for two-way binding",
    },
  ],
  solution: [
    {
      approach: "Approach 1: Proxy-based Binding",
      code: "function createReactiveObject(data, callback) {\n  return new Proxy(data, {\n    set(target, property, value) {\n      target[property] = value;\n      callback(property, value);\n      return true;\n    }\n  });\n}",
    },
  ],
  files: [
    {
      name: "index.html",
      code: "<!DOCTYPE html>\n<html lang='en'>\n<head>\n  <meta charset='UTF-8'>\n  <meta name='viewport' content='width=device-width, initial-scale=1.0'>\n  <title>Data Binding System</title>\n  <link rel='stylesheet' href='styles.css'>\n</head>\n<body>\n  <div class='container'>\n    <h1>Data Binding System</h1>\n    \n    <div class='binding-section'>\n      <h3>One-Way Binding</h3>\n      <div class='demo-container'>\n        <div class='binding-controls'>\n          <input type='text' id='nameInput' placeholder='Enter name'>\n          <input type='number' id='ageInput' placeholder='Enter age'>\n          <button id='updateData'>Update Data</button>\n        </div>\n        <div class='binding-display'>\n          <p>Name: <span class='bound' data-bind='name'>John Doe</span></p>\n          <p>Age: <span class='bound' data-bind='age'>25</span></p>\n          <p>Full Info: <span class='bound' data-bind='fullInfo'>John Doe is 25 years old</span></p>\n        </div>\n      </div>\n    </div>\n    \n    <div class='binding-section'>\n      <h3>Two-Way Binding</h3>\n      <div class='demo-container'>\n        <div class='binding-controls'>\n          <input type='text' class='two-way' data-bind='message' placeholder='Type message'>\n          <textarea class='two-way' data-bind='description' placeholder='Type description'></textarea>\n          <input type='checkbox' class='two-way' data-bind='active'>\n          <label for='active'>Active</label>\n        </div>\n        <div class='binding-display'>\n          <p>Message: <span class='bound' data-bind='message'>Hello</span></p>\n          <p>Description: <span class='bound' data-bind='description'>Description</span></p>\n          <p>Status: <span class='bound' data-bind='active'>false</span></p>\n        </div>\n      </div>\n    </div>\n    \n    <div class='binding-section'>\n      <h3>List Binding</h3>\n      <div class='demo-container'>\n        <div class='binding-controls'>\n          <input type='text' id='newItem' placeholder='New item'>\n          <button id='addItem'>Add Item</button>\n          <button id='removeItem'>Remove Last</button>\n          <button id='clearList'>Clear All</button>\n        </div>\n        <ul class='bound-list' data-bind='items'>\n          <li>Item 1</li>\n          <li>Item 2</li>\n          <li>Item 3</li>\n        </ul>\n        <p>Total items: <span class='bound' data-bind='itemCount'>3</span></p>\n      </div>\n    </div>\n    \n    <div class='binding-section'>\n      <h3>Computed Properties</h3>\n      <div class='demo-container'>\n        <div class='binding-controls'>\n          <input type='number' class='two-way' data-bind='price' placeholder='Price'>\n          <input type='number' class='two-way' data-bind='quantity' placeholder='Quantity'>\n          <input type='number' class='two-way' data-bind='taxRate' placeholder='Tax Rate (%)'>\n        </div>\n        <div class='binding-display'>\n          <p>Subtotal: $<span class='bound' data-bind='subtotal'>0.00</span></p>\n          <p>Tax: $<span class='bound' data-bind='tax'>0.00</span></p>\n          <p>Total: $<span class='bound' data-bind='total'>0.00</span></p>\n        </div>\n      </div>\n    </div>\n    \n    <div class='binding-section'>\n      <h3>Form Validation</h3>\n      <div class='demo-container'>\n        <form class='bound-form' data-bind='formData'>\n          <div class='form-group'>\n            <label>Email:</label>\n            <input type='email' class='two-way' data-bind='email' required>\n            <span class='validation-error' data-bind='emailError'></span>\n          </div>\n          <div class='form-group'>\n            <label>Password:</label>\n            <input type='password' class='two-way' data-bind='password' required>\n            <span class='validation-error' data-bind='passwordError'></span>\n          </div>\n          <div class='form-group'>\n            <label>Confirm Password:</label>\n            <input type='password' class='two-way' data-bind='confirmPassword' required>\n            <span class='validation-error' data-bind='confirmPasswordError'></span>\n          </div>\n          <button type='submit'>Submit</button>\n        </form>\n        <div class='form-status'>\n          <p>Form Valid: <span class='bound' data-bind='formValid'>false</span></p>\n          <p>Errors: <span class='bound' data-bind='errorCount'>0</span></p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <script src='script.js'></script>\n</body>\n</html>"
    },
    {
      name: "styles.css",
      code: "* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: Arial, sans-serif;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n  padding: 2rem;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  background: white;\n  border-radius: 16px;\n  padding: 2rem;\n  box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n}\n\nh1 {\n  color: #333;\n  margin-bottom: 2rem;\n  text-align: center;\n  font-size: 2.5rem;\n}\n\n.binding-section {\n  margin: 3rem 0;\n  padding: 2rem;\n  border: 2px solid #f0f0f0;\n  border-radius: 12px;\n  background: #fafafa;\n}\n\n.binding-section h3 {\n  color: #666;\n  margin-bottom: 1.5rem;\n  font-size: 1.2rem;\n  text-align: center;\n}\n\n.demo-container {\n  background: white;\n  border-radius: 8px;\n  padding: 1.5rem;\n  border: 2px solid #dee2e6;\n}\n\n.binding-controls {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.binding-controls input,\n.binding-controls textarea {\n  padding: 0.6rem;\n  border: 2px solid #dee2e6;\n  border-radius: 4px;\n  font-size: 1rem;\n}\n\n.binding-controls textarea {\n  min-width: 200px;\n  min-height: 60px;\n  resize: vertical;\n}\n\n.binding-controls input[type='checkbox'] {\n  width: auto;\n}\n\nbutton {\n  padding: 0.6rem 1.2rem;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: bold;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\nbutton:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n\nbutton:active {\n  transform: translateY(0);\n}\n\n.binding-display {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1.5rem;\n  border: 1px solid #e9ecef;\n}\n\n.binding-display p {\n  margin-bottom: 0.5rem;\n  color: #666;\n}\n\n.bound {\n  font-weight: bold;\n  color: #667eea;\n  padding: 0.2rem 0.4rem;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 4px;\n  transition: all 0.3s ease;\n}\n\n.bound.updated {\n  background: rgba(78, 205, 196, 0.2);\n  color: #4ecdc4;\n  transform: scale(1.05);\n}\n\n.bound-list {\n  list-style: none;\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1rem;\n  margin: 1rem 0;\n  border: 1px solid #e9ecef;\n}\n\n.bound-list li {\n  padding: 0.5rem;\n  margin-bottom: 0.5rem;\n  background: white;\n  border-radius: 4px;\n  border-left: 3px solid #667eea;\n  transition: all 0.3s ease;\n}\n\n.bound-list li:hover {\n  transform: translateX(5px);\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n\n.bound-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.form-group label {\n  font-weight: 500;\n  color: #666;\n}\n\n.form-group input {\n  padding: 0.6rem;\n  border: 2px solid #dee2e6;\n  border-radius: 4px;\n  font-size: 1rem;\n}\n\n.form-group input.valid {\n  border-color: #4ecdc4;\n}\n\n.form-group input.invalid {\n  border-color: #ff6b6b;\n}\n\n.validation-error {\n  color: #ff6b6b;\n  font-size: 0.9rem;\n  min-height: 1.2rem;\n}\n\n.form-status {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1rem;\n  border: 1px solid #e9ecef;\n}\n\n.form-status p {\n  margin-bottom: 0.5rem;\n  color: #666;\n}\n\n.form-status .bound {\n  background: none;\n  padding: 0;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .binding-controls {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .binding-controls input,\n  .binding-controls textarea {\n    width: 100%;\n  }\n  \n  .container {\n    padding: 1rem;\n  }\n  \n  .binding-section {\n    padding: 1rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .container {\n    padding: 0.5rem;\n  }\n  \n  .binding-section {\n    padding: 0.5rem;\n  }\n}"
    },
    {
      name: "script.js",
      code: "// Data Binding System\n\nclass DataBinder {\n  constructor() {\n    this.data = {};\n    this.computed = {};\n    this.watchers = {};\n    this.validators = {};\n  }\n  \n  // Create reactive data\n  reactive(data) {\n    const self = this;\n    \n    return new Proxy(data, {\n      set(target, property, value) {\n        const oldValue = target[property];\n        target[property] = value;\n        \n        // Update DOM bindings\n        self.updateBindings(property, value);\n        \n        // Trigger watchers\n        if (self.watchers[property]) {\n          self.watchers[property].forEach(callback => callback(value, oldValue));\n        }\n        \n        // Update computed properties\n        self.updateComputed();\n        \n        // Run validators\n        if (self.validators[property]) {\n          self.validators[property](value);\n        }\n        \n        return true;\n      },\n      \n      get(target, property) {\n        return target[property];\n      }\n    });\n  }\n  \n  // Add computed property\n  computedProperty(name, dependencies, computeFn) {\n    this.computed[name] = { dependencies, computeFn };\n  }\n  \n  // Update computed properties\n  updateComputed() {\n    Object.keys(this.computed).forEach(name => {\n      const { dependencies, computeFn } = this.computed[name];\n      const values = dependencies.map(dep => this.data[dep]);\n      const result = computeFn(...values);\n      this.updateBindings(name, result);\n    });\n  }\n  \n  // Watch for changes\n  watch(property, callback) {\n    if (!this.watchers[property]) {\n      this.watchers[property] = [];\n    }\n    this.watchers[property].push(callback);\n  }\n  \n  // Add validator\n  validate(property, validatorFn) {\n    this.validators[property] = validatorFn;\n  }\n  \n  // Update DOM bindings\n  updateBindings(property, value) {\n    const elements = document.querySelectorAll(`[data-bind=\"${property}\"]`);\n    \n    elements.forEach(element => {\n      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {\n        if (element.type === 'checkbox') {\n          element.checked = value;\n        } else {\n          element.value = value;\n        }\n      } else {\n        element.textContent = value;\n      }\n      \n      // Add visual feedback\n      element.classList.add('updated');\n      setTimeout(() => element.classList.remove('updated'), 300);\n    });\n  }\n  \n  // Bind form elements\n  bindForm() {\n    const twoWayElements = document.querySelectorAll('.two-way');\n    \n    twoWayElements.forEach(element => {\n      const property = element.dataset.bind;\n      \n      element.addEventListener('input', (e) => {\n        if (element.type === 'checkbox') {\n          this.data[property] = e.target.checked;\n        } else {\n          this.data[property] = e.target.value;\n        }\n      });\n    });\n  }\n  \n  // Bind list\n  bindList(property, templateFn) {\n    this.watch(property, (items) => {\n      const container = document.querySelector(`[data-bind=\"${property}\"]`);\n      if (container && container.tagName === 'UL') {\n        container.innerHTML = items.map(templateFn).join('');\n      }\n    });\n  }\n}\n\n// Initialize data binder\nconst binder = new DataBinder();\n\n// One-way binding demo\nconst oneWayData = binder.reactive({\n  name: 'John Doe',\n  age: 25\n});\n\n// Computed property for full info\nbinder.computedProperty('fullInfo', ['name', 'age'], (name, age) => {\n  return `${name} is ${age} years old`;\n});\n\n// Update button for one-way binding\ndocument.getElementById('updateData').addEventListener('click', () => {\n  const nameInput = document.getElementById('nameInput');\n  const ageInput = document.getElementById('ageInput');\n  \n  if (nameInput.value) {\n    oneWayData.name = nameInput.value;\n  }\n  \n  if (ageInput.value) {\n    oneWayData.age = parseInt(ageInput.value);\n  }\n  \n  nameInput.value = '';\n  ageInput.value = '';\n});\n\n// Two-way binding demo\nconst twoWayData = binder.reactive({\n  message: 'Hello',\n  description: 'Description',\n  active: false\n});\n\n// Initialize two-way data values\nObject.keys(twoWayData).forEach(key => {\n  binder.updateBindings(key, twoWayData[key]);\n});\n\nbinder.bindForm();\n\n// List binding demo\nconst listData = binder.reactive({\n  items: ['Item 1', 'Item 2', 'Item 3']\n});\n\nbinder.bindList('items', (item, index) => `<li>${item}</li>`);\n\nbinder.computedProperty('itemCount', ['items'], (items) => items.length);\n\n// List controls\ndocument.getElementById('addItem').addEventListener('click', () => {\n  const input = document.getElementById('newItem');\n  if (input.value.trim()) {\n    listData.items = [...listData.items, input.value.trim()];\n    input.value = '';\n  }\n});\n\ndocument.getElementById('removeItem').addEventListener('click', () => {\n  if (listData.items.length > 0) {\n    listData.items = listData.items.slice(0, -1);\n  }\n});\n\ndocument.getElementById('clearList').addEventListener('click', () => {\n  listData.items = [];\n});\n\n// Computed properties demo\nconst computedData = binder.reactive({\n  price: 0,\n  quantity: 0,\n  taxRate: 10\n});\n\n// Initialize computed data values\nObject.keys(computedData).forEach(key => {\n  binder.updateBindings(key, computedData[key]);\n});\n\nbinder.computedProperty('subtotal', ['price', 'quantity'], (price, quantity) => {\n  return (price * quantity).toFixed(2);\n});\n\nbinder.computedProperty('tax', ['subtotal', 'taxRate'], (subtotal, taxRate) => {\n  return (subtotal * taxRate / 100).toFixed(2);\n});\n\nbinder.computedProperty('total', ['subtotal', 'tax'], (subtotal, tax) => {\n  return (parseFloat(subtotal) + parseFloat(tax)).toFixed(2);\n});\n\n// Form validation demo\nconst formData = binder.reactive({\n  email: '',\n  password: '',\n  confirmPassword: ''\n});\n\n// Initialize form data values\nObject.keys(formData).forEach(key => {\n  binder.updateBindings(key, formData[key]);\n});\n\n// Validators\nbinder.validate('email', (value) => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  const isValid = emailRegex.test(value);\n  const errorElement = document.querySelector('[data-bind=\"emailError\"]');\n  \n  if (errorElement) {\n    errorElement.textContent = isValid ? '' : 'Please enter a valid email';\n  }\n  \n  const inputElement = document.querySelector('[data-bind=\"email\"]');\n  if (inputElement) {\n    inputElement.classList.toggle('valid', isValid && value.length > 0);\n    inputElement.classList.toggle('invalid', !isValid && value.length > 0);\n  }\n  \n  updateFormValidity();\n});\n\nbinder.validate('password', (value) => {\n  const isValid = value.length >= 8;\n  const errorElement = document.querySelector('[data-bind=\"passwordError\"]');\n  \n  if (errorElement) {\n    errorElement.textContent = isValid ? '' : 'Password must be at least 8 characters';\n  }\n  \n  const inputElement = document.querySelector('[data-bind=\"password\"]');\n  if (inputElement) {\n    inputElement.classList.toggle('valid', isValid && value.length > 0);\n    inputElement.classList.toggle('invalid', !isValid && value.length > 0);\n  }\n  \n  updateFormValidity();\n});\n\nbinder.validate('confirmPassword', (value) => {\n  const isValid = value === formData.password;\n  const errorElement = document.querySelector('[data-bind=\"confirmPasswordError\"]');\n  \n  if (errorElement) {\n    errorElement.textContent = isValid ? '' : 'Passwords do not match';\n  }\n  \n  const inputElement = document.querySelector('[data-bind=\"confirmPassword\"]');\n  if (inputElement) {\n    inputElement.classList.toggle('valid', isValid && value.length > 0);\n    inputElement.classList.toggle('invalid', !isValid && value.length > 0);\n  }\n  \n  updateFormValidity();\n});\n\nfunction updateFormValidity() {\n  const emailValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email);\n  const passwordValid = formData.password.length >= 8;\n  const confirmPasswordValid = formData.confirmPassword === formData.password;\n  \n  const formValid = emailValid && passwordValid && confirmPasswordValid;\n  const errorCount = [!emailValid, !passwordValid, !confirmPasswordValid].filter(Boolean).length;\n  \n  binder.updateBindings('formValid', formValid);\n  binder.updateBindings('errorCount', errorCount);\n}\n\n// Form submission\ndocument.querySelector('.bound-form').addEventListener('submit', (e) => {\n  e.preventDefault();\n  \n  const emailValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email);\n  const passwordValid = formData.password.length >= 8;\n  const confirmPasswordValid = formData.confirmPassword === formData.password;\n  \n  if (emailValid && passwordValid && confirmPasswordValid) {\n    alert('Form submitted successfully!');\n  } else {\n    alert('Please fix the errors before submitting.');\n  }\n});\n\n// Initialize all bindings\nbinder.bindForm();\n\n// Initialize computed data\nObject.keys(computedData).forEach(key => {\n  binder.updateBindings(key, computedData[key]);\n});\n\n// Initialize form data\nObject.keys(formData).forEach(key => {\n  binder.updateBindings(key, formData[key]);\n});"
    }
  ],
  tests: [
    {
      test: "Test 1: Data binding creation",
      code: "const binder = new DataBinder();\nconst data = binder.reactive({ name: 'Test' });\nconsole.log('Reactive data created:', data.name);"
    }
  ],
};
