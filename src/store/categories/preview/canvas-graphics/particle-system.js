export const particleSystem = {
  title: "Canvas Particle System",
  description: "Create dynamic particle systems with physics, animations, and interactive effects",
  code_examples: [
    {
      example: "Example 1:",
      code: "class Particle {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.vx = Math.random() * 4 - 2;\n    this.vy = Math.random() * 4 - 2;\n  }\n  \n  update() {\n    this.x += this.vx;\n    this.y += this.vy;\n  }\n}",
    },
  ],
  hints: [
    {
      hint: "Hint: Use arrays to store multiple particles",
    },
    {
      hint: "Consider requestAnimationFrame for smooth animations",
    },
  ],
  solution: [
    {
      approach: "Approach 1: Basic Particle System",
      code: "class Particle {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.vx = (Math.random() - 0.5) * 2;\n    this.vy = (Math.random() - 0.5) * 2;\n    this.radius = Math.random() * 3 + 1;\n    this.color = `hsl(${Math.random() * 360}, 70%, 50%)`;\n  }\n  \n  update(canvas) {\n    this.x += this.vx;\n    this.y += this.vy;\n    \n    if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;\n    if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;\n  }\n  \n  draw(ctx) {\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n    ctx.fillStyle = this.color;\n    ctx.fill();\n  }\n}",
    },
  ],
  files: [
    {
      name: "index.html",
      code: "<!DOCTYPE html>\n<html lang='en'>\n<head>\n  <meta charset='UTF-8'>\n  <meta name='viewport' content='width=device-width, initial-scale=1.0'>\n  <title>Canvas Particle System</title>\n  <link rel='stylesheet' href='styles.css'>\n</head>\n<body>\n  <div class='container'>\n    <h1>Canvas Particle System</h1>\n    \n    <div class='particle-section'>\n      <h3>Basic Particle System</h3>\n      <div class='controls'>\n        <button id='startParticles'>Start Particles</button>\n        <button id='stopParticles'>Stop Particles</button>\n        <button id='addParticles'>Add Particles</button>\n        <button id='clearParticles'>Clear All</button>\n      </div>\n      <canvas id='particleCanvas' width='800' height='500' class='particle-canvas'></canvas>\n      <div class='info'>\n        <p>Particles: <span id='particleCount'>0</span></p>\n      </div>\n    </div>\n    \n    <div class='particle-section'>\n      <h3>Fireworks Effect</h3>\n      <div class='controls'>\n        <button id='launchFirework'>Launch Firework</button>\n        <button id='autoFireworks'>Auto Fireworks</button>\n        <button id='stopFireworks'>Stop</button>\n      </div>\n      <canvas id='fireworksCanvas' width='800' height='500' class='particle-canvas'></canvas>\n    </div>\n    \n    <div class='particle-section'>\n      <h3>Interactive Particles</h3>\n      <div class='info'>\n        <p>Move your mouse over the canvas to attract particles</p>\n      </div>\n      <canvas id='interactiveCanvas' width='800' height='500' class='particle-canvas'></canvas>\n      <div class='controls'>\n        <label>Attraction Force:</label>\n        <input type='range' id='attractionForce' min='0' max='100' value='50'>\n        <span id='forceValue'>50</span>\n      </div>\n    </div>\n    \n    <div class='particle-section'>\n      <h3>Particle Fountain</h3>\n      <div class='controls'>\n        <button id='startFountain'>Start Fountain</button>\n        <button id='stopFountain'>Stop Fountain</button>\n        <label>Flow Rate:</label>\n        <input type='range' id='flowRate' min='1' max='10' value='5'>\n      </div>\n      <canvas id='fountainCanvas' width='800' height='500' class='particle-canvas'></canvas>\n    </div>\n    \n    <div class='particle-section'>\n      <h3>Particle Constellation</h3>\n      <div class='controls'>\n        <button id='createConstellation'>Create Constellation</button>\n        <button id='toggleConnections'>Toggle Connections</button>\n        <label>Connection Distance:</label>\n        <input type='range' id='connectionDistance' min='50' max='200' value='100'>\n      </div>\n      <canvas id='constellationCanvas' width='800' height='500' class='particle-canvas'></canvas>\n    </div>\n  </div>\n  <script src='script.js'></script>\n</body>\n</html>"
    },
    {
      name: "styles.css",
      code: "* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: Arial, sans-serif;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n  padding: 2rem;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  background: white;\n  border-radius: 16px;\n  padding: 2rem;\n  box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n}\n\nh1 {\n  color: #333;\n  margin-bottom: 2rem;\n  text-align: center;\n  font-size: 2.5rem;\n}\n\n.particle-section {\n  margin: 3rem 0;\n  padding: 2rem;\n  border: 2px solid #f0f0f0;\n  border-radius: 12px;\n  background: #fafafa;\n}\n\n.particle-section h3 {\n  color: #666;\n  margin-bottom: 1.5rem;\n  font-size: 1.2rem;\n  text-align: center;\n}\n\n.particle-canvas {\n  border: 2px solid #dee2e6;\n  border-radius: 8px;\n  background: #000;\n  display: block;\n  margin: 1rem auto;\n  box-shadow: 0 4px 15px rgba(0,0,0,0.3);\n}\n\n.controls {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n}\n\n.controls label {\n  font-weight: 500;\n  color: #666;\n}\n\nbutton {\n  padding: 0.8rem 1.5rem;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: bold;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\nbutton:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n\nbutton:active {\n  transform: translateY(0);\n}\n\ninput[type='range'] {\n  width: 100px;\n}\n\n.info {\n  text-align: center;\n  color: #666;\n  margin-top: 1rem;\n}\n\n.info p {\n  font-size: 0.9rem;\n  opacity: 0.8;\n}\n\n.info span {\n  font-weight: bold;\n  color: #333;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .particle-canvas {\n    width: 100%;\n    max-width: 500px;\n    height: auto;\n  }\n  \n  .controls {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n  \n  .controls label {\n    margin-bottom: 0.5rem;\n  }\n  \n  .container {\n    padding: 1rem;\n  }\n  \n  .particle-section {\n    padding: 1rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .container {\n    padding: 0.5rem;\n  }\n  \n  .particle-section {\n    padding: 0.5rem;\n  }\n  \n  button {\n    width: 100%;\n    max-width: 200px;\n  }\n}"
    },
    {
      name: "script.js",
      code: "// Canvas Particle System\n\n// Basic Particle System\nconst particleCanvas = document.getElementById('particleCanvas');\nconst particleCtx = particleCanvas.getContext('2d');\n\n// Fireworks Canvas\nconst fireworksCanvas = document.getElementById('fireworksCanvas');\nconst fireworksCtx = fireworksCanvas.getContext('2d');\n\n// Interactive Canvas\nconst interactiveCanvas = document.getElementById('interactiveCanvas');\nconst interactiveCtx = interactiveCanvas.getContext('2d');\n\n// Fountain Canvas\nconst fountainCanvas = document.getElementById('fountainCanvas');\nconst fountainCtx = fountainCanvas.getContext('2d');\n\n// Constellation Canvas\nconst constellationCanvas = document.getElementById('constellationCanvas');\nconst constellationCtx = constellationCanvas.getContext('2d');\n\n// Particle class\nclass Particle {\n  constructor(x, y, options = {}) {\n    this.x = x;\n    this.y = y;\n    this.vx = options.vx || (Math.random() - 0.5) * 4;\n    this.vy = options.vy || (Math.random() - 0.5) * 4;\n    this.radius = options.radius || Math.random() * 3 + 1;\n    this.color = options.color || `hsl(${Math.random() * 360}, 70%, 50%)`;\n    this.life = options.life || 1;\n    this.decay = options.decay || 0.01;\n    this.gravity = options.gravity || 0;\n  }\n  \n  update(canvas) {\n    this.x += this.vx;\n    this.y += this.vy;\n    this.vy += this.gravity;\n    this.life -= this.decay;\n    \n    // Bounce off walls\n    if (this.x - this.radius < 0 || this.x + this.radius > canvas.width) {\n      this.vx = -this.vx * 0.8;\n    }\n    if (this.y - this.radius < 0 || this.y + this.radius > canvas.height) {\n      this.vy = -this.vy * 0.8;\n    }\n  }\n  \n  draw(ctx) {\n    ctx.save();\n    ctx.globalAlpha = this.life;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n    ctx.fillStyle = this.color;\n    ctx.fill();\n    ctx.restore();\n  }\n  \n  isDead() {\n    return this.life <= 0;\n  }\n}\n\n// Basic particle system\nlet basicParticles = [];\nlet basicAnimationId = null;\n\nfunction animateBasicParticles() {\n  particleCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';\n  particleCtx.fillRect(0, 0, particleCanvas.width, particleCanvas.height);\n  \n  basicParticles = basicParticles.filter(particle => {\n    particle.update(particleCanvas);\n    particle.draw(particleCtx);\n    return !particle.isDead();\n  });\n  \n  document.getElementById('particleCount').textContent = basicParticles.length;\n  \n  basicAnimationId = requestAnimationFrame(animateBasicParticles);\n}\n\nfunction createBasicParticles(count = 50) {\n  for (let i = 0; i < count; i++) {\n    const x = Math.random() * particleCanvas.width;\n    const y = Math.random() * particleCanvas.height;\n    basicParticles.push(new Particle(x, y));\n  }\n}\n\ndocument.getElementById('startParticles').addEventListener('click', () => {\n  if (!basicAnimationId) {\n    createBasicParticles(100);\n    animateBasicParticles();\n  }\n});\n\ndocument.getElementById('stopParticles').addEventListener('click', () => {\n  if (basicAnimationId) {\n    cancelAnimationFrame(basicAnimationId);\n    basicAnimationId = null;\n  }\n});\n\ndocument.getElementById('addParticles').addEventListener('click', () => {\n  createBasicParticles(25);\n});\n\ndocument.getElementById('clearParticles').addEventListener('click', () => {\n  basicParticles = [];\n  particleCtx.fillStyle = 'black';\n  particleCtx.fillRect(0, 0, particleCanvas.width, particleCanvas.height);\n  document.getElementById('particleCount').textContent = '0';\n});\n\n// Fireworks system\nclass Firework {\n  constructor(x, y) {\n    this.x = x;\n    this.y = fireworksCanvas.height;\n    this.targetY = y;\n    this.vx = 0;\n    this.vy = -15;\n    this.exploded = false;\n    this.particles = [];\n    this.color = `hsl(${Math.random() * 360}, 70%, 50%)`;\n  }\n  \n  update() {\n    if (!this.exploded) {\n      this.y += this.vy;\n      this.vy += 0.3;\n      \n      if (this.y <= this.targetY || this.vy >= 0) {\n        this.explode();\n      }\n    } else {\n      this.particles = this.particles.filter(particle => {\n        particle.update(fireworksCanvas);\n        return !particle.isDead();\n      });\n    }\n  }\n  \n  explode() {\n    this.exploded = true;\n    for (let i = 0; i < 50; i++) {\n      const angle = (Math.PI * 2 * i) / 50;\n      const velocity = Math.random() * 5 + 2;\n      this.particles.push(new Particle(this.x, this.y, {\n        vx: Math.cos(angle) * velocity,\n        vy: Math.sin(angle) * velocity,\n        gravity: 0.1,\n        decay: 0.02,\n        color: this.color\n      }));\n    }\n  }\n  \n  draw(ctx) {\n    if (!this.exploded) {\n      ctx.beginPath();\n      ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);\n      ctx.fillStyle = this.color;\n      ctx.fill();\n    } else {\n      this.particles.forEach(particle => particle.draw(ctx));\n    }\n  }\n  \n  isDead() {\n    return this.exploded && this.particles.length === 0;\n  }\n}\n\nlet fireworks = [];\nlet fireworksAnimationId = null;\nlet autoFireworksInterval = null;\n\nfunction animateFireworks() {\n  fireworksCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';\n  fireworksCtx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);\n  \n  fireworks = fireworks.filter(firework => {\n    firework.update();\n    firework.draw(fireworksCtx);\n    return !firework.isDead();\n  });\n  \n  fireworksAnimationId = requestAnimationFrame(animateFireworks);\n}\n\ndocument.getElementById('launchFirework').addEventListener('click', () => {\n  const x = Math.random() * fireworksCanvas.width;\n  const y = Math.random() * fireworksCanvas.height * 0.5;\n  fireworks.push(new Firework(x, y));\n  \n  if (!fireworksAnimationId) {\n    animateFireworks();\n  }\n});\n\ndocument.getElementById('autoFireworks').addEventListener('click', () => {\n  if (!autoFireworksInterval) {\n    autoFireworksInterval = setInterval(() => {\n      const x = Math.random() * fireworksCanvas.width;\n      const y = Math.random() * fireworksCanvas.height * 0.5;\n      fireworks.push(new Firework(x, y));\n      \n      if (!fireworksAnimationId) {\n        animateFireworks();\n      }\n    }, 500);\n  }\n});\n\ndocument.getElementById('stopFireworks').addEventListener('click', () => {\n  if (autoFireworksInterval) {\n    clearInterval(autoFireworksInterval);\n    autoFireworksInterval = null;\n  }\n});\n\n// Interactive particles\nlet interactiveParticles = [];\nlet mouseX = 0;\nlet mouseY = 0;\nlet interactiveAnimationId = null;\n\ninteractiveCanvas.addEventListener('mousemove', (e) => {\n  const rect = interactiveCanvas.getBoundingClientRect();\n  mouseX = e.clientX - rect.left;\n  mouseY = e.clientY - rect.top;\n  \n  // Add particles at mouse position\n  for (let i = 0; i < 3; i++) {\n    interactiveParticles.push(new Particle(mouseX, mouseY, {\n      vx: (Math.random() - 0.5) * 2,\n      vy: (Math.random() - 0.5) * 2,\n      decay: 0.01\n    }));\n  }\n});\n\nfunction animateInteractiveParticles() {\n  interactiveCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';\n  interactiveCtx.fillRect(0, 0, interactiveCanvas.width, interactiveCanvas.height);\n  \n  const attractionForce = document.getElementById('attractionForce').value / 1000;\n  \n  interactiveParticles = interactiveParticles.filter(particle => {\n    // Apply attraction to mouse\n    const dx = mouseX - particle.x;\n    const dy = mouseY - particle.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    \n    if (distance > 0 && distance < 200) {\n      particle.vx += (dx / distance) * attractionForce;\n      particle.vy += (dy / distance) * attractionForce;\n    }\n    \n    particle.update(interactiveCanvas);\n    particle.draw(interactiveCtx);\n    return !particle.isDead();\n  });\n  \n  interactiveAnimationId = requestAnimationFrame(animateInteractiveParticles);\n}\n\ndocument.getElementById('attractionForce').addEventListener('input', (e) => {\n  document.getElementById('forceValue').textContent = e.target.value;\n});\n\n// Start interactive animation on load\ninteractiveCanvas.addEventListener('mouseenter', () => {\n  if (!interactiveAnimationId) {\n    animateInteractiveParticles();\n  }\n});\n\n// Fountain particles\nlet fountainParticles = [];\nlet fountainAnimationId = null;\nlet fountainActive = false;\n\nfunction createFountainParticle() {\n  const x = fountainCanvas.width / 2 + (Math.random() - 0.5) * 20;\n  const y = fountainCanvas.height - 50;\n  \n  return new Particle(x, y, {\n    vx: (Math.random() - 0.5) * 4,\n    vy: -Math.random() * 10 - 5,\n    gravity: 0.3,\n    decay: 0.005,\n    color: `hsl(${200 + Math.random() * 60}, 70%, 50%)`\n  });\n}\n\nfunction animateFountain() {\n  fountainCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';\n  fountainCtx.fillRect(0, 0, fountainCanvas.width, fountainCanvas.height);\n  \n  if (fountainActive) {\n    const flowRate = parseInt(document.getElementById('flowRate').value);\n    for (let i = 0; i < flowRate; i++) {\n      fountainParticles.push(createFountainParticle());\n    }\n  }\n  \n  fountainParticles = fountainParticles.filter(particle => {\n    particle.update(fountainCanvas);\n    particle.draw(fountainCtx);\n    return !particle.isDead();\n  });\n  \n  fountainAnimationId = requestAnimationFrame(animateFountain);\n}\n\ndocument.getElementById('startFountain').addEventListener('click', () => {\n  fountainActive = true;\n  if (!fountainAnimationId) {\n    animateFountain();\n  }\n});\n\ndocument.getElementById('stopFountain').addEventListener('click', () => {\n  fountainActive = false;\n});\n\n// Constellation particles\nlet constellationParticles = [];\nlet constellationAnimationId = null;\nlet showConnections = true;\n\nfunction createConstellationParticles(count = 50) {\n  for (let i = 0; i < count; i++) {\n    constellationParticles.push(new Particle(\n      Math.random() * constellationCanvas.width,\n      Math.random() * constellationCanvas.height,\n      {\n        vx: (Math.random() - 0.5) * 0.5,\n        vy: (Math.random() - 0.5) * 0.5,\n        decay: 0,\n        radius: 2\n      }\n    ));\n  }\n}\n\nfunction drawConnections(ctx) {\n  const maxDistance = parseInt(document.getElementById('connectionDistance').value);\n  \n  for (let i = 0; i < constellationParticles.length; i++) {\n    for (let j = i + 1; j < constellationParticles.length; j++) {\n      const dx = constellationParticles[i].x - constellationParticles[j].x;\n      const dy = constellationParticles[i].y - constellationParticles[j].y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      \n      if (distance < maxDistance) {\n        ctx.beginPath();\n        ctx.moveTo(constellationParticles[i].x, constellationParticles[i].y);\n        ctx.lineTo(constellationParticles[j].x, constellationParticles[j].y);\n        ctx.strokeStyle = `rgba(255, 255, 255, ${1 - distance / maxDistance})`;\n        ctx.lineWidth = 0.5;\n        ctx.stroke();\n      }\n    }\n  }\n}\n\nfunction animateConstellation() {\n  constellationCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';\n  constellationCtx.fillRect(0, 0, constellationCanvas.width, constellationCanvas.height);\n  \n  if (showConnections) {\n    drawConnections(constellationCtx);\n  }\n  \n  constellationParticles.forEach(particle => {\n    particle.update(constellationCanvas);\n    particle.draw(constellationCtx);\n  });\n  \n  constellationAnimationId = requestAnimationFrame(animateConstellation);\n}\n\ndocument.getElementById('createConstellation').addEventListener('click', () => {\n  constellationParticles = [];\n  createConstellationParticles(50);\n  if (!constellationAnimationId) {\n    animateConstellation();\n  }\n});\n\ndocument.getElementById('toggleConnections').addEventListener('click', () => {\n  showConnections = !showConnections;\n});\n\n// Initialize canvases with black background\n[particleCtx, fireworksCtx, interactiveCtx, fountainCtx, constellationCtx].forEach(ctx => {\n  ctx.fillStyle = 'black';\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n});"
    }
  ],
  tests: [
    {
      test: "Test 1: Particle creation",
      code: "const particle = new Particle(100, 100);\nconsole.log('Particle created:', particle.x, particle.y, particle.color);"
    }
  ],
};
